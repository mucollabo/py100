전자공시 API 개편에 따라 2020년 4월 20일부터 Open DART 시스템이 정식 운영을 시작했습니다. 기존 DART 시스템 지원이 종료되면서, 책에서 설명하고 있는 소스코드를 그대로 이용하는 경우 접속 오류가 발생합니다.  (​예제 43번~ 46번)

[예제 43번] 043new.py
기존 DART에서는 종목코드(6자리)를 사용했는데, Open DART는 8자리 고유코드를 부여하고 있습니다. 따라서, 종목코드 6자리를 입력하여 8자리 고유코드를 알아내는 작업이 필요합니다. 책 177페이지 소스코드의 7~9번 라인 대신 아래의 코드를 순서대로 입력합니다.

7~30:  DART가 제공하는 종목코드 목록을 PC에 다운로드하는 download_company_code_file 함수를 정의합니다. 함수를 호출하여 실행하면, 지정한 폴더 위치에 XML 파일(“CORPCODE.xml”)이 저장됩니다. 

33~53: 종목코드 6자리 코드를 입력받아서, 목록에서 8자리 고유코드를 찾아서 리턴하는 함수입니다. 먼저, 다운로드한 XML 파일을 불러와서 BeautifulSoup으로 파싱하고, 입력받은 종목코드와 매칭하는 8자리 코드를 찾아줍니다. 

56~58: 8자리 코드와 사용자 인증키를 조합하여 url을 완성합니다.  

[예제 44번] 044new.py
상장기업 개황정보 API 요청변수 이름도 많은 부분에서 변화가 있습니다. 이와 같은 변화 내용을 반영하여 소스 코드 일부를 대체합니다. 

7~32: 예제 43번을 실행하고 나면, data 폴더에 8자리 고유번호 목록 파일이 저장됩니다. 이 파일에서 6자리 주식 종목코드를 이용하여 8자리 고유번호를 찾는 함수를 다시 사용합니다. DART 접속 url을 조합하여 완성합니다. 

38~71: 추출한 요소 값을 딕셔너리 구조로 정리합니다. (요소명이 일부 변경되었습니다)

[예제 45번] 045new.py
예제 45번에서 다루는 최근 3개월 공시자료 검색에 필요한 API 요청변수 리스트도 달라진 부분이 많습니다. 

9~42: 책 소스코드 9~19 라인을 대체하는 코드입니다. 종목코드 6자리 코드를 8자리 고유코드로 변환하여 url을 완성합니다. 

54~59: 책 소스코드 33~38 라인을 대체합니다. 요소명이 변경된 부분을 반영하였습니다. 

[예제 46번] 046new.py
예제 46번에서는 상세보고서 유형을 지정하는 방법을 다루고 있습니다. 

16~51: 책 소스코드 16~51 라인을 그대로 대체합니다. API 주소 변경된 부분과, API가 리턴해 주는 결과 값의 요소명이 달라진 부분을 반영하였습니다. 